"use strict";(globalThis["webpackChunkpizzarree"]=globalThis["webpackChunkpizzarree"]||[]).push([[499],{1192:(e,a,s)=>{s.r(a),s.d(a,{default:()=>V});var r=s(9835),o=s(1957);const t={class:"items-center row"},l={class:"justify-end row full-width"};function n(e,a,s,n,i,d){const u=(0,r.up)("q-input"),c=(0,r.up)("q-checkbox"),m=(0,r.up)("q-btn"),p=(0,r.up)("q-form"),w=(0,r.up)("user-access-card");return(0,r.wg)(),(0,r.j4)(w,{form:n.confirmForm,loading:n.loading,actionText:"user.password_reset"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"q-gutter-md",onSubmit:(0,o.iM)(n.handleSubmit,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{outlined:"",modelValue:n.confirmForm.password,"onUpdate:modelValue":a[0]||(a[0]=e=>n.confirmForm.password=e),type:n.isNotPwd?"text":"password",name:"password",label:e.$t("user.password"),hint:e.$t("user.password"),error:n.confirmForm.errors.has("password"),"error-message":n.confirmForm.errors.get("password"),rules:[n.requiredField],"lazy-rules":"ondemand",autocomplete:"",autocorrect:"off",spellcheck:"false",disable:n.loading},null,8,["modelValue","type","label","hint","error","error-message","rules","disable"]),(0,r.Wm)(u,{outlined:"",modelValue:n.confirmForm.password2,"onUpdate:modelValue":a[1]||(a[1]=e=>n.confirmForm.password2=e),type:n.isNotPwd?"text":"password",name:"password2",label:e.$t("confirm"),hint:e.$t("confirm"),error:n.confirmForm.errors.has("password2"),"error-message":n.confirmForm.errors.get("password2"),rules:[n.requiredField],"lazy-rules":"ondemand",autocomplete:"",autocorrect:"off",spellcheck:"false",disable:n.loading},null,8,["modelValue","type","label","hint","error","error-message","rules","disable"]),(0,r.Wm)(c,{label:"show password",modelValue:n.showPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>n.showPassword=e),onClick:a[3]||(a[3]=(0,o.iM)((()=>n.isNotPwd=!n.isNotPwd),["prevent"]))},null,8,["modelValue"]),(0,r._)("div",t,[(0,r._)("div",l,[(0,r.Wm)(m,{label:n.capitalize(e.$t("submit")),type:"submit",color:"primary",loading:n.loading,"no-caps":""},null,8,["label","loading"])])])])),_:1},8,["onSubmit"])])),_:1},8,["form","loading"])}s(2879);var i=s(6827),d=s(499),u=s(6501),c=s(7615),m=s(6928),p=s(8339),w=s(321),h=s(6647);const f="api/v1/accounts/api-auth-user/password_change/",b={name:"PasswordResetConfirm",components:{UserAccessCard:c.Z},async setup(){const{capitalize:e}=w["default"],{t:a}=(0,h.QT)(),s=(0,m.t)(),r=(0,p.tv)(),o=(0,p.yj)(),t=(0,d.ref)(!1),l=(0,d.shallowRef)(!1),n=(0,d.shallowRef)(!1),c=(0,d.reactive)(new u["default"]({password:"",password2:""}));let b=o.query.auth_token;const g=async e=>setTimeout((async()=>{await s.validateTempToken()}),6e4*e),y=async()=>{t.value=!0,await c.patch(f)},k=e=>e&&e.length>0||a("required_field");c.onSuccess=async()=>{c.reset(),await r.push(o.query.redirect||{name:"Dashboard"}),await s.clearTempToken(),i.Z.create({type:"positive",message:a("password changed you can login now"),progress:!0,position:"top"})},c.onFinished=()=>{t.value=!1};const v=async()=>{await s.clearTempToken(),clearTimeout(g),"PasswordResetConfirm"===o.name&&(await r.isReady(),await r.push({name:"home"}))};if(s.$subscribe((async e=>{"expired"===e.events.key&&!0===e.events.newValue&&await v()})),b&&b.length){await s.setTempToken({value:b,expiryMinutes:5});let e=Object.assign({},o.query);delete e.auth_token,await r.push({path:o.path}),await g(5.1)}return s.tempToken.expired&&!b&&await v(),{isNotPwd:l,showPassword:n,confirmForm:c,handleSubmit:y,loading:t,requiredField:k,capitalize:e}}};var g=s(1639),y=s(8326),k=s(6611),v=s(1221),F=s(4455),T=s(9984),q=s.n(T);const P=(0,g.Z)(b,[["render",n]]),V=P;q()(b,"components",{QForm:y.Z,QInput:k.Z,QCheckbox:v.Z,QBtn:F.Z})}}]);