"use strict";(globalThis["webpackChunkpizzarree"]=globalThis["webpackChunkpizzarree"]||[]).push([[402],{402:(e,t,l)=>{l.r(t),l.d(t,{default:()=>O});var a=l(9835),n=l(6970),o=l(1957);const i={class:"flex justify-between self-start items-start row tw-static q-layout-padding col"},s={class:"tw-text-md"},u={class:"tw-text-sm"},c={class:"flex items-center q-ma-sm rounded-borders container"},r={class:"text-h6 q-pa-lg"},d=(0,a._)("p",{class:"tw-text-xl"},"Cart is empty, awaiting your delicious choices",-1);function m(e,t,l,m,p,w){const v=(0,a.up)("q-img"),y=(0,a.up)("q-btn"),f=(0,a.up)("q-btn-group"),C=(0,a.up)("q-card-actions"),g=(0,a.up)("q-card-section"),k=(0,a.up)("ProductModal"),b=(0,a.up)("q-card"),h=(0,a.up)("q-toolbar-title"),q=(0,a.up)("CouponComponent");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(b,{class:(0,n.C_)(["col-xs-12",(e.isCartEmpty,"col-md-8")])},{default:(0,a.w5)((()=>[e.isCartEmpty?((0,a.wg)(),(0,a.j4)(g,{key:1,class:"text-center"},{default:(0,a.w5)((()=>[d,(0,a.Wm)(y,{unelevated:"",color:"primary",to:{name:"Menu"},label:"Go Shopping"})])),_:1})):((0,a.wg)(),(0,a.j4)(g,{key:0},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cart,((t,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.items,(i=>((0,a.wg)(),(0,a.j4)(g,{key:i,class:"column items-start justify-between"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i,(l=>((0,a.wg)(),(0,a.iD)("div",{key:l.id,class:"flex tw-gap-2 items-center"},[e.isTopping(t.items,i,l)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(v,{key:0,src:l.cover_image,class:"tw-rounded-2xl tw-h-20 tw-w-20"},null,8,["src"])),(0,a._)("div",{class:(0,n.C_)(e.isTopping(t.items,i,l)?"flex tw-justify-between tw-min-w-[300px] ":"")},[(0,a._)("div",s,(0,n.zw)(l.name),1),(0,a._)("div",u,"$"+(0,n.zw)(l.price),1)],2)])))),128)),(0,a.Wm)(C,{class:"self-end"},{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a._)("div",r,"Quantity "+(0,n.zw)(t.quantity),1),(0,a.Wm)(f,{class:"column"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{size:"sm",icon:"add",dense:"",flat:"",onClick:(0,o.iM)((e=>t.quantity++),["prevent"])},null,8,["onClick"]),(0,a.Wm)(y,{size:"sm",icon:"remove",dense:"",flat:"",onClick:(0,o.iM)((e=>t.quantity>1?t.quantity--:null),["prevent"])},null,8,["onClick"])])),_:2},1024)]),i[0].tags.includes("pizza")?((0,a.wg)(),(0,a.j4)(y,{key:0,icon:"edit",onClick:t=>e.handleEdit(i,l),color:"primary"},null,8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(y,{icon:"delete",color:"red",onClick:t=>e.removeFromCart(l)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])))),128)),(0,a.Wm)(k,{"model-value":e.showEditModal,editing:!0,"action-text":"Update","editing-items":e.itemToEdit,onHideModal:t[0]||(t[0]=t=>e.showEditModal=!1)},null,8,["model-value","editing-items"])])),_:1}))])),_:1},8,["class"]),e.isCartEmpty?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(b,{key:0,class:"flex-container self-start tw-sticky tw-top-20 col-xs-12 col-md-3 q-mt-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"column justify-around tw-min-h-[300px]"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Subtotal $"+(0,n.zw)(e.cartTotal),1)])),_:1}),(0,a.Wm)(q),(0,a.Wm)(y,{onClick:(0,o.iM)(e.handleCheckout,["prevent"]),dense:"",color:"primary",disable:e.cartTotal<=0},{default:(0,a.w5)((()=>[(0,a.Uk)("Checkout")])),_:1},8,["onClick","disable"])])),_:1})])),_:1}))])}var p=l(499),w=l(9524),v=l(1809),y=l(8339);function f(e,t){const l=(0,a.up)("q-btn"),n=(0,a.up)("q-input"),o=(0,a.up)("q-form");return(0,a.wg)(),(0,a.j4)(o,{class:"q-my-lg flex justify-between items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{dense:"","hide-bottom-space":"","item-aligned":"",label:"Coupon Code",hint:"Do you have a coupon?",outlined:""},{append:(0,a.w5)((()=>[(0,a.Wm)(l,{unelevated:"",dense:"",label:"apply"})])),_:1})])),_:1})}var C=l(1639),g=l(8326),k=l(6611),b=l(4455),h=l(9984),q=l.n(h);const _={},x=(0,C.Z)(_,[["render",f]]),j=x;q()(_,"components",{QForm:g.Z,QInput:k.Z,QBtn:b.Z});var Z=l(6002);const W=(0,a.aZ)({name:"CartComponent",components:{ProductModal:Z.Z,CouponComponent:j},emits:["showModal"],async setup(){let e=(0,w.M)();(0,y.tv)();let t=(0,p.ref)(0);const{cart:l}=(0,v.Jk)(e),{order:n}=(0,v.Jk)(e),o=[e=>e&&e>=1],i=(0,a.Fl)((()=>0===Object.keys(l.value).length));let s=(0,p.ref)({});const u=(e,t)=>{r.value=!0;let l={};l[t]=e,s.value=l};let c=(e,t,l)=>e[0].length>1&&l.name!=t[0]?.name,r=(0,p.ref)(!1);const d=e=>{delete l.value[e],i.value&&(t.value=0,n.value&&(n.value={}))},m=async()=>{await e.postToApiCart({product_list:e.flatCartProducts})};(0,a.bv)((()=>{i.value||f()}));const f=()=>{let e=Number(Object.values(l.value).flatMap((({items:e,quantity:t})=>({items:e,quantity:t}))).map((({items:e,quantity:t})=>Object.values(e).flat().map((e=>e.price)).reduce(((e,t)=>Number(e)+Number(t)))*t)).reduce(((e,t)=>e+t)))?.toFixed(2);t.value=e||0};return(0,a.YP)(l.value,(e=>{Object.keys(e).length&&f()}),{deep:!0}),{cart:l,isCartEmpty:i,removeFromCart:d,cartTotal:t,handleCheckout:m,qtyRules:o,isTopping:c,showEditModal:r,handleEdit:u,itemToEdit:s}}});var M=l(7605),T=l(4458),z=l(3190),Q=l(335),E=l(1821),D=l(7236),F=l(1973);const H=(0,C.Z)(W,[["render",m]]),O=H;q()(W,"components",{QLayout:M.Z,QCard:T.Z,QCardSection:z.Z,QImg:Q.Z,QCardActions:E.Z,QBtnGroup:D.Z,QBtn:b.Z,QToolbarTitle:F.Z})}}]);